<?xml version="1.0" encoding="UTF-8"?>
<!--
    PUF Document Status — France
    Use Case: UC19b — Self-Billing (Auto-Facturation)
    Use Case: Seller → Buyer (roles reversed from billing perspective). Reporting payment collection (Encaissée).
    French CDAR status code: 212 (Encaissée)

    Reference invoice: PUF_France_UC19b_SelfBilling_Invoice.xml (SMBF-AF-2026-01234)
    Sender  (Seller): Ferme Biologique Rousseau EARL — SIREN 777666555
    Receiver (Buyer): SuperMarchés Bio France SAS — SIREN 999888777

    In self-billing (auto-facturation), the BUYER creates and emits the invoice on behalf
    of the SELLER. From the billing perspective, the buyer is the "emetteur" (issuer) and
    the seller is the "destinataire" (recipient) in the invoice flow.

    However, for the Encaissée Document Status:
      - The PAYMENT direction is NOT reversed — the seller is still the party that collects
        the payment and must report it to PPF.
      - The SELLER (Ferme Biologique Rousseau) creates and sends this Document Status.
      - The BUYER (SuperMarchés Bio France) is the receiver of the Document Status.

    This means the SenderParty/ReceiverParty in the Document Status follow the NORMAL
    pattern (seller sends, buyer receives), even though the invoice itself was created
    by the buyer in self-billing.

    See also: PUF_France_UC19b_SelfBilling_Invoice.xml
-->
<ApplicationResponse xmlns="urn:oasis:names:specification:ubl:schema:xsd:ApplicationResponse-2"
                     xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"
                     xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"
                     xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"
                     xmlns:puf="urn:pagero:ExtensionComponent:1.0">
    <!-- Specification Identifier -->
    <cbc:CustomizationID>urn:pagero.com:puf:document_status:1.0</cbc:CustomizationID>
    <!-- Business process type identifier -->
    <cbc:ProfileID>urn:pagero.com:puf:document_status:1.0</cbc:ProfileID>
    <!-- Response identifier (max 20 characters) -->
    <cbc:ID>RESP-FR-UC19B-001</cbc:ID>
    <!-- Response issue date (after invoice due date 2026-03-04) -->
    <cbc:IssueDate>2026-03-10</cbc:IssueDate>
    <!-- Response issue time (mandatory in France) -->
    <cbc:IssueTime>16:00:00</cbc:IssueTime>
    <!--
        In self-billing, the SELLER (Ferme Biologique Rousseau) is the SenderParty
        of the Encaissée Document Status, because the seller reports VAT collection.
        Payment direction is NOT reversed despite the self-billing arrangement.
    -->
    <!-- Sender Party (Seller — reports payment collection) -->
    <cac:SenderParty>
        <cac:PartyIdentification>
            <!-- SIREN identifier (scheme 0002) -->
            <cbc:ID schemeID="0002">777666555</cbc:ID>
        </cac:PartyIdentification>
        <cac:PartyLegalEntity>
            <cbc:RegistrationName>Ferme Biologique Rousseau EARL</cbc:RegistrationName>
        </cac:PartyLegalEntity>
    </cac:SenderParty>
    <!-- Receiver Party (Buyer — receives Document Status) -->
    <cac:ReceiverParty>
        <cac:PartyIdentification>
            <!-- SIREN identifier (scheme 0002) -->
            <cbc:ID schemeID="0002">999888777</cbc:ID>
        </cac:PartyIdentification>
        <cac:PartyLegalEntity>
            <cbc:RegistrationName>SuperMarchés Bio France SAS</cbc:RegistrationName>
        </cac:PartyLegalEntity>
    </cac:ReceiverParty>
    <!-- Document Response -->
    <cac:DocumentResponse>
        <cac:Response>
            <ext:UBLExtensions>
                <ext:UBLExtension>
                    <ext:ExtensionURI>urn:pagero:ExtensionComponent:1.0:PageroExtension:ResponseExtension</ext:ExtensionURI>
                    <ext:ExtensionContent>
                        <puf:PageroExtension>
                            <puf:ResponseExtension>
                                <puf:DocumentMatchingID>
                                    <cbc:ID>19200000001</cbc:ID>
                                </puf:DocumentMatchingID>
                            </puf:ResponseExtension>
                        </puf:PageroExtension>
                    </ext:ExtensionContent>
                </ext:UBLExtension>
            </ext:UBLExtensions>
            <!-- Response Code: PAYMENT_RECEIVED = Encaissée (French code 212) -->
            <cbc:ResponseCode>PAYMENT_RECEIVED</cbc:ResponseCode>
            <!--
                MEN = full invoice TTC collected by the seller.
                Invoice: SMBF-AF-2026-01234, 1,641.60 EUR TTC (1,368.00 HT + 273.60 TVA @ 20%).
            -->
            <cac:Status>
                <ext:UBLExtensions>
                    <ext:UBLExtension>
                        <ext:ExtensionURI>urn:pagero:ExtensionComponent:1.0:PageroExtension:StatusExtension</ext:ExtensionURI>
                        <ext:ExtensionContent>
                            <puf:PageroExtension>
                                <puf:StatusExtension>
                                    <puf:Amounts>
                                        <puf:Amount>
                                            <puf:AmountType>MEN</puf:AmountType>
                                            <cbc:TaxExclusiveAmount currencyID="EUR">1368.00</cbc:TaxExclusiveAmount>
                                            <cbc:TaxInclusiveAmount currencyID="EUR">1641.60</cbc:TaxInclusiveAmount>
                                            <puf:ClassifiedTaxCategory>
                                                <cbc:Percent>20</cbc:Percent>
                                                <cac:TaxScheme>
                                                    <cbc:ID>VAT</cbc:ID>
                                                </cac:TaxScheme>
                                            </puf:ClassifiedTaxCategory>
                                        </puf:Amount>
                                    </puf:Amounts>
                                </puf:StatusExtension>
                            </puf:PageroExtension>
                        </ext:ExtensionContent>
                    </ext:UBLExtension>
                </ext:UBLExtensions>
                <cbc:StatusReasonCode>NON</cbc:StatusReasonCode>
            </cac:Status>
        </cac:Response>
        <cac:DocumentReference>
            <cbc:ID>SMBF-AF-2026-01234</cbc:ID>
            <cbc:IssueDate>2026-02-02</cbc:IssueDate>
            <!-- Document type code: 380 = Invoice -->
            <cbc:DocumentTypeCode>380</cbc:DocumentTypeCode>
        </cac:DocumentReference>
    </cac:DocumentResponse>
</ApplicationResponse>
